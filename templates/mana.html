<!DOCTYPE html>
<html>
<head>
    <title>Floating Mana Tracker</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="manifest" href="/static/manifest.json">
    <meta name="theme-color" content="#1976d2">
    <link rel="icon" href="/static/img/scuteswarm.png">
    <link rel="stylesheet" href="/static/css/tiles.css">
    <link rel="stylesheet" href="/static/css/subpage.css">
    <link rel="stylesheet" href="/static/css/mana.css">
</head>
<body>
    <a href="/" class="back-arrow" aria-label="Back to main page">&#8592;</a>
    <div class="tiles-container mana-grid">
        <div class="tile mana-tile white-mana">
            <button class="mana-control plus" data-color="white" aria-label="Add white mana">+</button>
            <div class="mana-value" id="value-white">0</div>
            <button class="mana-control minus" data-color="white" aria-label="Spend white mana">-</button>
            <span class="mana-label">White</span>
        </div>
        <div class="tile mana-tile blue-mana">
            <button class="mana-control plus" data-color="blue" aria-label="Add blue mana">+</button>
            <div class="mana-value" id="value-blue">0</div>
            <button class="mana-control minus" data-color="blue" aria-label="Spend blue mana">-</button>
            <span class="mana-label">Blue</span>
        </div>
        <div class="tile mana-tile black-mana">
            <button class="mana-control plus" data-color="black" aria-label="Add black mana">+</button>
            <div class="mana-value" id="value-black">0</div>
            <button class="mana-control minus" data-color="black" aria-label="Spend black mana">-</button>
            <span class="mana-label">Black</span>
        </div>
        <div class="tile mana-tile red-mana">
            <button class="mana-control plus" data-color="red" aria-label="Add red mana">+</button>
            <div class="mana-value" id="value-red">0</div>
            <button class="mana-control minus" data-color="red" aria-label="Spend red mana">-</button>
            <span class="mana-label">Red</span>
        </div>
        <div class="tile mana-tile green-mana">
            <button class="mana-control plus" data-color="green" aria-label="Add green mana">+</button>
            <div class="mana-value" id="value-green">0</div>
            <button class="mana-control minus" data-color="green" aria-label="Spend green mana">-</button>
            <span class="mana-label">Green</span>
        </div>
    </div>
    <script>
        const manaTotals = {
            white: 0,
            blue: 0,
            black: 0,
            red: 0,
            green: 0,
        };

        const updateValue = (color) => {
            const el = document.getElementById(`value-${color}`);
            if (el) {
                el.textContent = manaTotals[color];
            }
        };

        document.querySelectorAll('.mana-control').forEach((btn) => {
            btn.addEventListener('click', () => {
                const { color } = btn.dataset;
                const delta = btn.classList.contains('plus') ? 1 : -1;
                manaTotals[color] = Math.max(0, manaTotals[color] + delta);
                updateValue(color);
            });
        });

        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/static/js/service-worker.js');
            });
        }
    </script>
</body>
</html>
