<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/static/css/tiles.css">
    <link rel="stylesheet" href="/static/css/import.css">
    <link rel="stylesheet" href="/static/css/subpage.css">
    <link rel="manifest" href="/static/manifest.json">
    <meta name="theme-color" content="#1976d2">
    <link rel="icon" href="/static/img/mtg.ico">
    <link rel="apple-touch-icon" href="/static/img/mtg.png">
</head>
<body>
    <a href="/" class="back-arrow" aria-label="Back to main page">&#8592;</a>
    <div class="import-banner-container">
        <img src="/static/img/portalsbanner.png" alt="Portals Card Lookup Banner" class="import-banner">
    </div>
    <div class="container" style="margin-top:0;">
        <div class="section tan" style="margin-top:0;">
            <form id="importForm" enctype="multipart/form-data" method="POST">
                <div class="input-group">
                    <input type="file" id="fileInput" name="file" accept=".txt" style="margin-bottom:10px;">
                    <div style="margin:10px 0; color:#333; font-weight:bold;">OR</div>
                    <textarea id="cardNames" name="cardNames" rows="6" cols="40" placeholder="Paste card names here, one per line"></textarea>
                    <button type="submit" style="margin-top:15px;">Import</button>
                </div>
            </form>
            <div id="importStatus" style="margin-top:20px; color:#2196F3;"></div>
        </div>
    </div>
    <div id="loadingOverlay">
        <div class="loader"></div>
        <div class="loading-text">Loading, please wait...</div>
    </div>
    <script>
    document.getElementById('importForm').addEventListener('submit', function(e) {
        var overlay = document.getElementById('loadingOverlay');
        overlay.classList.add('active');
        // Let the browser submit the form normally, so Flask renders the results page
        // Do not use fetch or preventDefault
    });
    </script>
</body>
</html>
